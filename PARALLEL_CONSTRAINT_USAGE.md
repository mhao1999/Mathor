# 平行约束功能使用说明

## 功能概述

平行约束功能允许用户创建两条线段，并确保它们始终保持平行。当用户拖拽其中一个点时，SolveSpace求解器会自动调整其他点的位置以保持平行关系。

## 使用方法

### 1. 创建平行约束场景

1. 点击"平行约束"按钮
2. 系统会自动创建：
   - 4个点：点1(50,50)、点2(150,100)、点3(50,150)、点4(150,200)
   - 两条线段：线段1(点1-点2)、线段2(点3-点4)
   - 4个拖拽约束：每个点都可以被拖拽
   - 1个平行约束：两条线段保持平行

### 2. 测试拖拽功能

1. 点击"测试拖拽约束"按钮
2. 系统会尝试将点1拖拽到新位置(100,100)
3. 求解器会自动调整其他点的位置以保持平行关系

### 3. 手动拖拽测试

1. 在绘图区域中直接拖拽任意一个点
2. 观察其他点如何自动调整以保持平行关系

## 技术实现

### 约束类型

- **SLVS_C_WHERE_DRAGGED**: 使点可以被拖拽
- **SLVS_C_PARALLEL**: 使两条线段保持平行

### 求解过程

1. 当用户拖拽一个点时，系统调用`solveDragConstraint`方法
2. 求解器创建SolveSpace系统，包含所有点和线段
3. 应用所有约束条件
4. 求解器计算新的点位置
5. 更新界面显示

### 关键代码位置

- `EaSession::createParallelConstraint()`: 创建平行约束场景
- `EaSession::createDragConstraint()`: 创建拖拽约束
- `EaSession::addParallelConstraint()`: 添加平行约束
- `GeometrySolver::solveDragConstraint()`: 求解拖拽约束

## 预期效果

当拖拽任意一个点时：
- 被拖拽的点移动到新位置
- 同一条线段上的另一个点保持相对位置
- 另一条线段自动调整以保持平行关系
- 所有约束条件得到满足

## 调试信息

系统会在控制台输出详细的调试信息，包括：
- 创建的点、线段和约束
- 求解过程中的参数和实体
- 求解结果和自由度信息

## 注意事项

1. 确保在创建约束前先点击"平行约束"按钮
2. 如果求解失败，检查控制台输出的错误信息
3. 平行约束需要至少两条线段才能生效
